<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Happy Birthday Garv â€” Card</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="card-page">
  <main class="card-wrap">
    <div class="card">
      <h1 class="title">ğŸ‰ Happy Birthday Garv! ğŸ‰</h1>

      <div class="message-wrap">
        <div id="typewriter" class="message" aria-live="polite"></div>
      </div>

      <div class="footer-row">
        <button id="startBtn" class="primary-btn">Start Game ğŸš—ğŸ‚</button>
      </div>

      <div class="note">â€” with lots of kasht taken by your homie</div>
    </div>
  </main>

  <!-- Preload audio so the click counts as a gesture -->
  <audio id="preloadAudio" src="music.mp3" preload="auto"></audio>

<script>
/* ---------- TYPEWRITER TEXT (medium speed) ---------- */
const TEXT = `Bhaiii tysm for guiding me and explaining things to me for hours like literally saving me every single time. And fr tg that you initiated that convo in the Live Insaan server varna hum aaj dost hi nahi hote ;-; (but aap catfish hote hote bach gaye ğŸ’€).

Anyways ab toh we homies bro daily tea spilling aur aapko gossip karne mein majboor kar diya hai humne lol ğŸ˜‚.

Youâ€™re genuinely an amazing and nice guy, sabka aur mera acha sochne ke liye dhanyawaad! Just be that way alwaysâ€¦ bas thoda gym shym jao aur body banao kya pata koi aapko ched de toh Cynthia poch nahi payegi ğŸ’”ğŸ’€.

Lwky love your music taste ekdum slayyy (95% match ğŸ¥¹) and your crazy humor ğŸ’€.

Waise Sorry but I drag you into all my kands because broâ€¦ ab toh you are the fire brigade aka Taarak Mehta ğŸ˜­ğŸ™ and main obviously Jethiya ğŸ˜ƒ (ik ye line sachme ajeeb thi).

God bless you Bhauu! Enjoy your special day.

And all the bestest for tmrw's physics paper AAG LAGA DENAAA ğŸ”¥

Once Again Happiest birthday Garvitaa ğŸ€`;

const target = document.getElementById('typewriter');
const speed = 28; // ms per char (medium)
let i = 0;

function typeNext(){
  if(i < TEXT.length){
    const ch = TEXT[i++];
    if(ch === '\n') target.innerHTML += '<br>';
    else {
      const escaped = ch.replace && ch.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
      target.innerHTML += escaped;
    }
    const last = TEXT[i-1];
    let extra = 0;
    if(last === '.' || last === '!' || last === '?') extra = 160;
    else if(last === ',' || last === ';') extra = 50;
    setTimeout(typeNext, speed + extra);
  } else {
    target.classList.add('typed-done');
  }
}

document.addEventListener('DOMContentLoaded', ()=> {
  setTimeout(typeNext, 400);
});

/* ---------- Start Game button: create gesture and navigate ---------- */
const startBtn = document.getElementById('startBtn');
const audio = document.getElementById('preloadAudio');

startBtn.addEventListener('click', async () => {
  // play to register a user gesture (some browsers require this)
  try { await audio.play(); } catch(e){ /* ignore */ }
  // mark gesture so game page can auto-play music
  sessionStorage.setItem('birthday_gesture','1');
  // small delay then navigate
  setTimeout(()=> location.href = 'game.html', 120);
});
</script>
</body>
</html>

