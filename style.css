/* -------------------------------------------
   Final style.css — Option A (Fullscreen)
   Works: iOS / iPadOS Safari, Android Chrome, Desktop
   ------------------------------------------- */

/* ---------- Variables / base ---------- */
:root{
  --canvas-w: 420;    /* logical canvas width (px) */
  --canvas-h: 720;    /* logical canvas height (px) */
  --accent: #ff4fa3;
  --hud-bg: rgba(255,255,255,0.85);
  --glass: rgba(255,255,255,0.08);
  --text-dark: #111;
}

*{ box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html,body{
  height:100%;
  margin:0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  background: #000; /* fallback */
  color: var(--text-dark);
  -webkit-user-select: none; user-select: none;
}

/* Prevent mobile bounce/overscroll while inside game */
body.game-page {
  overflow: hidden;
  touch-action: none; /* prevent double-scroll on iOS */
  -webkit-overflow-scrolling: auto;
}

/* ---------- Fullscreen background layers ---------- */
/* Sky (static or slow parallax) */
#sky {
  position: fixed;
  inset: 0 0 40% 0; /* top 60% by default - covers top area */
  background-image: url('sky.png');
  background-position: center top;
  background-size: cover;
  background-repeat: no-repeat;
  z-index: -3;
  pointer-events: none;
}

/* Road layer — repeating vertical image that scrolls */
#road {
  position: fixed;
  inset: 40% 0 0 0; /* bottom area */
  height: 60%;
  background-image: url('road.png'); /* or bg.png if you use that name */
  background-position: center 0;
  background-repeat: repeat-y;
  background-size: cover;
  z-index: -2;
  pointer-events: none;
  will-change: background-position;
  animation: road-scroll 2.2s linear infinite;
}
@keyframes road-scroll {
  from { background-position-y: 0; }
  to   { background-position-y: 1024px; } /* repeats visually */
}

/* ---------- Game root & responsive canvas ---------- */
/* Use a centered container that scales the canvas cleanly.
   Use aspect-ratio so the CSS size stays proportional to the logical canvas. */
#gameRoot {
  position: relative;
  width: min(94vw, 420px);          /* scale to viewport but never larger than logical width */
  aspect-ratio: calc(var(--canvas-w) / var(--canvas-h));
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  height: calc(min(94vw, 420px) * (var(--canvas-h) / var(--canvas-w))); /* fallback */
  z-index: 1;
  -webkit-user-select: none;
}

/* Important: keep the HTML canvas element at a fixed logical size in pixels,
   but allow CSS to scale it down visually. This avoids Safari's zoomed-canvas bug. */
#gameCanvas {
  width: 100%;                 /* CSS visual width (keeps it responsive) */
  height: 100%;                /* scaled by aspect-ratio of parent */
  display: block;
  image-rendering: auto;
  -webkit-image-rendering: auto;
  border-radius: 12px;
  box-shadow: 0 18px 50px rgba(0,0,0,0.55);
  background: transparent;
  touch-action: none;
}

/* Make sure the actual internal drawing buffer size is set by JS:
   canvas.width = 420; canvas.height = 720; (your script does this) */

/* ---------- HUD (score + hearts) ---------- */
#hud, #score, #hearts {
  position: absolute;
  z-index: 30;
  pointer-events: none; /* HUD shouldn't block touches */
}

#score {
  left: 12px;
  top: 12px;
  background: var(--hud-bg);
  color: var(--text-dark);
  padding: 8px 12px;
  border-radius: 10px;
  font-weight:800;
  font-size: 16px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
}

#hearts {
  right: 12px;
  top: 12px;
  display:flex;
  gap:8px;
  align-items:center;
}

/* hearts fallback (script inserts .heart elements) */
.heart {
  width: 28px;
  height: 28px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23ff2f72" d="M12 21s-7-4.35-9-7.18C-1.2 9.9 3.3 4 8.6 6.2 10 7 11.6 8.2 12 9c.4-.8 2-2 3.4-2.8 5.3-2.2 9.8 3.7 5.6 7.6C19 16.65 12 21 12 21z"/></svg>') center/contain no-repeat;
  opacity:1;
}

/* ---------- Overlay (start / game over) ---------- */
#overlay {
  position: absolute;
  inset: 0;
  display: none; /* script toggles */
  z-index: 50;
  background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.35));
  color: #fff;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:12px;
  padding: 18px;
  text-align:center;
}

#overlay h2 { margin:0; font-size:1.6rem; }
#overlay p { margin:0; opacity:0.95; }

/* Start button — visible before game starts (required to unlock audio) */
#startBtn {
  position: fixed;
  z-index: 60;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  padding: 14px 22px;
  font-size: 18px;
  background: linear-gradient(90deg, var(--accent), #ff7ad1);
  color: #fff;
  border: none;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(255,80,160,0.12);
  cursor: pointer;
  touch-action: manipulation;
}

/* Hide start button after start (script handles) */
/* #startBtn { display:none } */

/* ---------- Touch Controls (mobile) ---------- */
/* Place two round buttons on left & right (overlaid, but pointer-events used by script). */
#touchControls {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 18px;
  display: flex;
  justify-content: center;
  gap: 28px;
  z-index: 45;
  pointer-events: auto;
}

.ctl {
  width: 78px;
  height: 78px;
  border-radius: 20px;
  border: none;
  font-size: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: rgba(255,255,255,0.85);
  color: #111;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
  -webkit-user-select: none;
}

/* make buttons slightly smaller on tiny screens */
@media (max-width: 420px){
  .ctl { width: 64px; height: 64px; font-size: 22px; border-radius:16px; }
  #touchControls { gap:18px; bottom:12px; }
}

/* ---------- small polish ---------- */
.primary-btn { background: linear-gradient(90deg,var(--accent),#ff7ad1); color:#fff; border:none; padding:10px 14px; border-radius:10px; }
.secondary-btn { background: #fff; border: none; color: #111; padding:10px 14px; border-radius:10px; }

/* ---------- accessibility helpers ---------- */
button:active { transform: translateY(1px); }
:focus { outline: 3px solid rgba(255,80,160,0.15); outline-offset: 2px; }

/* ---------- dev helper: show sizes (optional) ---------- */
/* #gameRoot { outline: 1px dashed rgba(255,255,255,0.06); } */
